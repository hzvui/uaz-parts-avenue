<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Оформление заказа — Магазин запчастей УАЗ 469-452.ru. Быстрая доставка по всей России.">
  <title>Оформление заказа — Магазин 469-452.ru</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Top Bar -->
  <div class="top-bar">
    <div class="container">
      <div class="top-bar-left">
        <div class="icon-text">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
          <span>Пн-Пт: 9:00 - 18:00</span>
        </div>
        <div class="icon-text">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
          <span>Доставка по всей России</span>
        </div>
      </div>
      <div class="top-bar-right">
        <a href="https://wa.me/79372700026" target="_blank" rel="noopener noreferrer" class="whatsapp-link">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
          <span>WhatsApp</span>
        </a>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="container">
      <a href="index.html" class="header-logo">
        <div class="logo-icon"><span>УАЗ</span></div>
        <div class="logo-text">
          <h1>Магазин 469-452.ru</h1>
          <p>Запчасти УАЗ от А до Я</p>
        </div>
      </a>
      <div class="header-right">
        <a href="tel:+79372700026" class="header-phone">
          <div class="phone-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
          </div>
          <div class="phone-text">
            <strong>+7 937 270 00 26</strong>
            <span>Звоните!</span>
          </div>
        </a>
        <a href="cart.html" class="cart-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>
        </a>
      </div>
    </div>
    <nav class="main-nav">
      <div class="container">
        <ul>
          <li class="catalog-btn"><a href="catalog.html">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
            Каталог
          </a></li>
          <li><a href="category.html?slug=engine">Двигатель</a></li>
          <li><a href="category.html?slug=transmission">Трансмиссия</a></li>
          <li><a href="category.html?slug=suspension">Ходовая</a></li>
          <li><a href="category.html?slug=brakes">Тормоза</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <!-- Page Content -->
  <div class="page-content">
    <div class="container">

      <!-- Breadcrumb -->
      <nav class="breadcrumb">
        <a href="index.html">Главная</a>
        <span>/</span>
        <a href="cart.html">Корзина</a>
        <span>/</span>
        <span>Оформление заказа</span>
      </nav>

      <h1 class="page-title">Оформление заказа</h1>

      <!-- Steps -->
      <div class="checkout-steps">
        <div class="step done">
          <div class="step-circle">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>
          </div>
          <span>Корзина</span>
        </div>
        <div class="step-line active"></div>
        <div class="step active">
          <div class="step-circle">2</div>
          <span>Оформление</span>
        </div>
        <div class="step-line"></div>
        <div class="step">
          <div class="step-circle">3</div>
          <span>Подтверждение</span>
        </div>
      </div>

      <!-- Main Grid -->
      <div class="checkout-grid">

        <!-- LEFT: Form -->
        <div class="checkout-form-section">

          <!-- Contact Info -->
          <div class="form-card">
            <div class="form-card-header">
              <div class="form-card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
              </div>
              <h2>Контактные данные</h2>
            </div>
            <div class="form-grid">
              <div class="form-group">
                <label for="firstName">Имя <span class="required">*</span></label>
                <input type="text" id="firstName" name="firstName" placeholder="Иван" required>
              </div>
              <div class="form-group">
                <label for="lastName">Фамилия <span class="required">*</span></label>
                <input type="text" id="lastName" name="lastName" placeholder="Иванов" required>
              </div>
              <div class="form-group">
                <label for="phone">Телефон <span class="required">*</span></label>
                <input type="tel" id="phone" name="phone" placeholder="+7 (___) ___-__-__" required>
              </div>
              <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" placeholder="ivan@example.com">
              </div>
            </div>
          </div>

          <!-- Delivery Method -->
          <div class="form-card">
            <div class="form-card-header">
              <div class="form-card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"/><path d="M15 18H9"/><path d="M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"/><circle cx="17" cy="18" r="2"/><circle cx="7" cy="18" r="2"/></svg>
              </div>
              <h2>Способ доставки</h2>
            </div>

            <div class="delivery-options">
              <label class="delivery-option selected" data-value="sdek">
                <input type="radio" name="delivery" value="sdek" checked>
                <div class="delivery-option-inner">
                  <div class="delivery-option-left">
                    <div class="delivery-radio"></div>
                    <div>
                      <div class="delivery-name">СДЭК</div>
                      <div class="delivery-desc">2–5 рабочих дней</div>
                    </div>
                  </div>
                  <div class="delivery-price">от 350 ₽</div>
                </div>
              </label>

              <label class="delivery-option" data-value="pochta">
                <input type="radio" name="delivery" value="pochta">
                <div class="delivery-option-inner">
                  <div class="delivery-option-left">
                    <div class="delivery-radio"></div>
                    <div>
                      <div class="delivery-name">Почта России</div>
                      <div class="delivery-desc">7–14 рабочих дней</div>
                    </div>
                  </div>
                  <div class="delivery-price">от 250 ₽</div>
                </div>
              </label>

              <label class="delivery-option" data-value="peк">
                <input type="radio" name="delivery" value="pek">
                <div class="delivery-option-inner">
                  <div class="delivery-option-left">
                    <div class="delivery-radio"></div>
                    <div>
                      <div class="delivery-name">ПЭК / Деловые линии</div>
                      <div class="delivery-desc">3–7 рабочих дней</div>
                    </div>
                  </div>
                  <div class="delivery-price">от 500 ₽</div>
                </div>
              </label>

              <label class="delivery-option" data-value="pickup">
                <input type="radio" name="delivery" value="pickup">
                <div class="delivery-option-inner">
                  <div class="delivery-option-left">
                    <div class="delivery-radio"></div>
                    <div>
                      <div class="delivery-name">Самовывоз</div>
                      <div class="delivery-desc">Со склада в Уфе</div>
                    </div>
                  </div>
                  <div class="delivery-price free">Бесплатно</div>
                </div>
              </label>
            </div>

            <!-- Address fields (hidden for pickup) -->
            <div class="address-fields" id="addressFields">
              <div class="form-group">
                <label for="city">Город <span class="required">*</span></label>
                <input type="text" id="city" name="city" placeholder="Москва" required>
              </div>
              <div class="form-group">
                <label for="address">Улица, дом, квартира <span class="required">*</span></label>
                <input type="text" id="address" name="address" placeholder="ул. Ленина, д. 1, кв. 1" required>
              </div>
              <div class="form-group">
                <label for="zip">Индекс</label>
                <input type="text" id="zip" name="zip" placeholder="123456">
              </div>
            </div>

            <!-- Pickup info (hidden by default) -->
            <div class="pickup-info hidden" id="pickupInfo">
              <div class="pickup-info-inner">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
                <div>
                  <strong>Адрес склада:</strong>
                  <p>г. Уфа, ул. Зенцова, д. 27</p>
                  <p class="text-muted">Пн–Пт: 9:00–18:00, Сб: 10:00–15:00</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Payment Method -->
          <div class="form-card">
            <div class="form-card-header">
              <div class="form-card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>
              </div>
              <h2>Способ оплаты</h2>
            </div>

            <div class="payment-options">
              <label class="payment-option selected" data-value="card">
                <input type="radio" name="payment" value="card" checked>
                <div class="payment-option-inner">
                  <div class="payment-radio"></div>
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>
                  <span>Банковская карта онлайн</span>
                </div>
              </label>

              <label class="payment-option" data-value="cod">
                <input type="radio" name="payment" value="cod">
                <div class="payment-option-inner">
                  <div class="payment-radio"></div>
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/><path d="M13 5v2"/><path d="M13 17v2"/><path d="M13 11v2"/></svg>
                  <span>Наложенный платёж</span>
                </div>
              </label>

              <label class="payment-option" data-value="transfer">
                <input type="radio" name="payment" value="transfer">
                <div class="payment-option-inner">
                  <div class="payment-radio"></div>
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"/></svg>
                  <span>Безналичный расчёт (для юрлиц)</span>
                </div>
              </label>

              <label class="payment-option" data-value="cash">
                <input type="radio" name="payment" value="cash">
                <div class="payment-option-inner">
                  <div class="payment-radio"></div>
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
                  <span>Наличными при самовывозе</span>
                </div>
              </label>
            </div>
          </div>

          <!-- Comment -->
          <div class="form-card">
            <div class="form-card-header">
              <div class="form-card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
              </div>
              <h2>Комментарий к заказу</h2>
            </div>
            <div class="form-group">
              <textarea id="comment" name="comment" rows="3" placeholder="Уточнения по заказу, пожелания по доставке..."></textarea>
            </div>
          </div>

        </div>

        <!-- RIGHT: Order Summary -->
        <div class="checkout-summary">
          <div class="summary-card sticky-summary">
            <h2>Ваш заказ</h2>

            <!-- Order Items -->
            <div class="order-items">
              <div class="order-item">
                <div class="order-item-img">
                  <img src="../src/assets/uaz-469.jpg" alt="Прокладка ГБЦ УАЗ 469">
                </div>
                <div class="order-item-info">
                  <div class="order-item-name">Прокладка головки блока цилиндров УАЗ 469</div>
                  <div class="order-item-art">Арт: 417-1003020</div>
                  <div class="order-item-qty-price">
                    <span class="order-item-qty">1 шт.</span>
                    <span class="order-item-price">1 250 ₽</span>
                  </div>
                </div>
              </div>

              <div class="order-item">
                <div class="order-item-img">
                  <img src="../src/assets/uaz-452.jpg" alt="Фильтр масляный">
                </div>
                <div class="order-item-info">
                  <div class="order-item-name">Фильтр масляный УАЗ Hunter/Patriot (двиг. 409)</div>
                  <div class="order-item-art">Арт: 451-1012005</div>
                  <div class="order-item-qty-price">
                    <span class="order-item-qty">2 шт.</span>
                    <span class="order-item-price">890 ₽</span>
                  </div>
                </div>
              </div>

              <div class="order-item">
                <div class="order-item-img">
                  <div class="order-item-no-img">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg>
                  </div>
                </div>
                <div class="order-item-info">
                  <div class="order-item-name">Сальник коленвала задний УАЗ 452</div>
                  <div class="order-item-art">Арт: 451-1005160</div>
                  <div class="order-item-qty-price">
                    <span class="order-item-qty">1 шт.</span>
                    <span class="order-item-price">320 ₽</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Promo Code -->
            <div class="promo-section">
              <div class="promo-input-wrap">
                <input type="text" id="promoCode" placeholder="Промокод" class="promo-input">
                <button type="button" class="btn btn-outline btn-sm" id="applyPromo">Применить</button>
              </div>
              <div class="promo-msg hidden" id="promoMsg"></div>
            </div>

            <!-- Totals -->
            <div class="summary-totals">
              <div class="summary-row">
                <span>Товары (3)</span>
                <span>2 460 ₽</span>
              </div>
              <div class="summary-row">
                <span>Доставка</span>
                <span id="deliveryCost">350 ₽</span>
              </div>
              <div class="summary-row discount hidden" id="discountRow">
                <span>Скидка (промокод)</span>
                <span id="discountAmt" class="text-secondary">−0 ₽</span>
              </div>
              <div class="summary-divider"></div>
              <div class="summary-row total">
                <strong>Итого</strong>
                <strong id="totalSum">2 810 ₽</strong>
              </div>
            </div>

            <!-- Submit -->
            <button type="button" class="btn btn-secondary btn-full btn-lg" id="submitOrder">
              Оформить заказ
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
            </button>

            <p class="summary-note">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg>
              Нажимая «Оформить заказ», вы соглашаетесь с <a href="#">условиями</a> и <a href="#">политикой конфиденциальности</a>
            </p>

            <!-- Trust badges -->
            <div class="trust-badges">
              <div class="trust-badge">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg>
                Безопасная оплата
              </div>
              <div class="trust-badge">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"/><path d="M15 18H9"/><path d="M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"/><circle cx="17" cy="18" r="2"/><circle cx="7" cy="18" r="2"/></svg>
                Быстрая доставка
              </div>
              <div class="trust-badge">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 11h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5Zm0 0a9 9 0 1 1 18 0m0 0v5a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3Z"/></svg>
                Поддержка 24/7
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Success Modal -->
      <div class="modal-overlay hidden" id="successModal">
        <div class="modal">
          <div class="modal-icon success-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>
          </div>
          <h2>Заказ оформлен!</h2>
          <p>Ваш заказ <strong id="orderNum">#1042</strong> принят в обработку. Мы свяжемся с вами в течение 30 минут для подтверждения.</p>
          <div class="modal-actions">
            <a href="index.html" class="btn btn-secondary">На главную</a>
            <a href="catalog.html" class="btn btn-outline">Продолжить покупки</a>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-col">
          <a href="index.html"><h2>Магазин<span>469-452</span>.ru</h2></a>
          <p>Запчасти УАЗ от А до Я</p>
        </div>
        <div class="footer-col">
          <h3>ИНФОРМАЦИЯ</h3>
          <ul>
            <li><a href="about.html">О компании</a></li>
            <li><a href="delivery.html">Доставка и оплата</a></li>
            <li><a href="contacts.html">Контакты</a></li>
            <li><a href="catalog.html">Каталог</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>© 2024 Магазин469-452.ru — Запчасти УАЗ. Все права защищены.</p>
      </div>
    </div>
  </footer>

  <script>
    // Delivery option selection
    document.querySelectorAll('.delivery-option').forEach(option => {
      option.addEventListener('click', function() {
        document.querySelectorAll('.delivery-option').forEach(o => o.classList.remove('selected'));
        this.classList.add('selected');
        this.querySelector('input[type="radio"]').checked = true;

        const val = this.dataset.value;
        const addressFields = document.getElementById('addressFields');
        const pickupInfo = document.getElementById('pickupInfo');
        const deliveryCost = document.getElementById('deliveryCost');
        const totalSum = document.getElementById('totalSum');

        const costs = { sdek: 350, pochta: 250, pek: 500, pickup: 0 };
        const cost = costs[val] || 350;
        deliveryCost.textContent = cost === 0 ? 'Бесплатно' : cost + ' ₽';

        // Update total
        updateTotal(cost);

        if (val === 'pickup') {
          addressFields.classList.add('hidden');
          pickupInfo.classList.remove('hidden');
        } else {
          addressFields.classList.remove('hidden');
          pickupInfo.classList.add('hidden');
        }
      });
    });

    // Payment option selection
    document.querySelectorAll('.payment-option').forEach(option => {
      option.addEventListener('click', function() {
        document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('selected'));
        this.classList.add('selected');
        this.querySelector('input[type="radio"]').checked = true;
      });
    });

    // Promo code
    let discount = 0;
    document.getElementById('applyPromo').addEventListener('click', function() {
      const code = document.getElementById('promoCode').value.trim().toUpperCase();
      const msgEl = document.getElementById('promoMsg');
      const discountRow = document.getElementById('discountRow');

      if (code === 'UAZ10') {
        discount = 246;
        msgEl.textContent = '✓ Промокод применён — скидка 10%';
        msgEl.className = 'promo-msg success';
        document.getElementById('discountAmt').textContent = '−' + discount + ' ₽';
        discountRow.classList.remove('hidden');
      } else if (code === '') {
        msgEl.textContent = 'Введите промокод';
        msgEl.className = 'promo-msg error';
        discountRow.classList.add('hidden');
        discount = 0;
      } else {
        msgEl.textContent = '✗ Промокод не найден';
        msgEl.className = 'promo-msg error';
        discountRow.classList.add('hidden');
        discount = 0;
      }
      msgEl.classList.remove('hidden');

      const selectedDelivery = document.querySelector('.delivery-option.selected')?.dataset.value;
      const costs = { sdek: 350, pochta: 250, pek: 500, pickup: 0 };
      updateTotal(costs[selectedDelivery] || 350);
    });

    function updateTotal(deliveryCost) {
      const base = 2460;
      const total = base + deliveryCost - discount;
      document.getElementById('totalSum').textContent = total.toLocaleString('ru-RU') + ' ₽';
    }

    // Phone mask
    const phoneInput = document.getElementById('phone');
    phoneInput.addEventListener('input', function(e) {
      let val = this.value.replace(/\D/g, '');
      if (val.startsWith('8')) val = '7' + val.slice(1);
      if (val.startsWith('7')) {
        this.value = '+7 (' + val.slice(1, 4) + ') ' + val.slice(4, 7) + '-' + val.slice(7, 9) + '-' + val.slice(9, 11);
      }
    });

    // Submit order
    document.getElementById('submitOrder').addEventListener('click', function() {
      const firstName = document.getElementById('firstName').value.trim();
      const phone = document.getElementById('phone').value.trim();

      if (!firstName) {
        document.getElementById('firstName').focus();
        document.getElementById('firstName').style.borderColor = 'var(--destructive)';
        return;
      }
      if (!phone || phone.length < 10) {
        document.getElementById('phone').focus();
        document.getElementById('phone').style.borderColor = 'var(--destructive)';
        return;
      }

      // Show success modal
      const orderNum = '#' + (1000 + Math.floor(Math.random() * 9000));
      document.getElementById('orderNum').textContent = orderNum;
      document.getElementById('successModal').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    });

    // Close modal on overlay click
    document.getElementById('successModal').addEventListener('click', function(e) {
      if (e.target === this) {
        this.classList.add('hidden');
        document.body.style.overflow = '';
      }
    });
  </script>
</body>
</html>
